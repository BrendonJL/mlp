---
id: "2025-12-29"
aliases: []
tags:
  - daily-notes
  - mario-rl-project
  - database-schema
  - sql
  - wandb
  - pre-commit
  - phase-1-complete
created: 2025-12-29
---
# üìÖ Sunday, December 29, 2025

> _Week 52 of 2025_

## üéØ Today's Goals

- [x] Design and implement database schema for experiment tracking
- [x] Set up Weights & Biases account and integration
- [x] Configure pre-commit hooks for code quality
- [x] **Complete Phase 1: Environment Setup** üéâ

## ‚úÖ What I Accomplished

- [x] Designed complete database schema with 4 relational tables ‚úÖ 2025-12-29
- [x] Created `experiments` table for training run metadata ‚úÖ 2025-12-29
- [x] Created `episodes` table for individual gameplay results ‚úÖ 2025-12-29
- [x] Created `hyperparameters` table using EAV pattern for flexible parameter storage ‚úÖ 2025-12-29
- [x] Created `training_metrics` table for periodic training statistics ‚úÖ 2025-12-29
- [x] Implemented foreign key relationships for data integrity ‚úÖ 2025-12-29
- [x] Wrote SQL CREATE TABLE statements in `database/schema.sql` ‚úÖ 2025-12-29
- [x] Successfully executed schema and created all tables in PostgreSQL ‚úÖ 2025-12-29
- [x] Verified table structure and foreign key constraints ‚úÖ 2025-12-29
- [x] Set up Weights & Biases free tier account ‚úÖ 2025-12-29
- [x] Installed and authenticated wandb package ‚úÖ 2025-12-29
- [x] Configured pre-commit hooks (black, ruff, file hygiene) ‚úÖ 2025-12-29
- [x] Ran initial pre-commit checks and committed auto-fixes ‚úÖ 2025-12-29
- [x] **Completed Phase 1: Environment Setup** ‚úÖ 2025-12-29

## üß† What I Learned

### SQL & Database Design

- **CREATE TABLE syntax**: Column definitions require name + data type + constraints
- **Data types**: SERIAL (auto-increment), INTEGER, TEXT, TIMESTAMP, NUMERIC, REAL, BOOLEAN
- **Constraints**: PRIMARY KEY, FOREIGN KEY, NOT NULL, REFERENCES
- **Foreign keys**: Link tables together with `REFERENCES parent_table(column_name)`
- **Entity-Attribute-Value (EAV) pattern**: Flexible schema for variable attributes (used in hyperparameters table)
- **Normalization principle**: Avoid redundant data by using separate related tables
- **Single source of truth**: Don't store derived/aggregate values - calculate on-demand or use views
- **Database views**: Virtual tables that calculate results dynamically without storing data
- **When to use NOT NULL**: Depends on when the row is created (at start vs. at completion)
  - Experiments: Some fields NULL at creation, filled in later
  - Episodes: All fields known at creation (only insert after episode completes)
- **PostgreSQL meta-commands**:
  - `\dt` - List all tables
  - `\d table_name` - Describe table structure
  - `\q` - Quit psql
- **psql command flags**: `-U` (user), `-d` (database), `-f` (execute from file)

### Development Workflow

- **SQL in version control**: Always write schema in `.sql` files, never type manually in production
- **Migration scripts**: Professional teams track schema changes with numbered migration files
- **Pre-commit hooks**: Automated quality checks that run before Git commits
- **Hook workflow**: Hooks auto-fix what they can, block commit if manual fixes needed
- **Poetry isolation**: `poetry add` works anywhere (manages venv directly), unlike `pip install`
- **System vs. project tools**: PostgreSQL/psql are system-level, don't need virtual environment
- **API key security**: Never commit keys to Git - store in `.netrc` or environment variables

### Project Management

- **Batch related changes**: Group documentation updates with feature commits
- **Immediate documentation**: Write while details are fresh, not days later
- **Phase-based development**: Clear milestones prevent scope creep

## üí° Challenges & Solutions

- **Challenge**: Confusion about when to use NOT NULL constraints
- **Solution**: Learned to think about *when* the row is created - experiments start incomplete, episodes are only inserted when complete

- **Challenge**: Typos in SQL (spacing in column names, misspelled keywords)
- **Solution**: SQL is very strict - learned to proofread carefully and use formatters/linters

- **Challenge**: Understanding the difference between storing aggregate statistics vs. calculating on-demand
- **Solution**: Learned about database normalization and the trade-offs between storage/performance and data integrity

- **Challenge**: Literal `~` directory created during project setup
- **Solution**: Identified and removed the mistakenly created directory - learned about shell expansion behavior

- **Challenge**: Neo-tree move command not working as expected after rename
- **Solution**: Fell back to command-line `mv` - sometimes the terminal is faster than the GUI

## üîú Tomorrow's Focus

- [ ] Begin Phase 2: Baseline Agent
- [ ] Install and test gym-super-mario-bros environment
- [ ] Implement random agent to understand environment mechanics
- [ ] Build frame preprocessing pipeline (grayscale, resize, frame stacking)
- [ ] Create first Jupyter notebook for environment exploration

## üîó Links & Context

- [[ProjectDocumentation]] - Updated Phase 1 completion
- [[2025-12-28|Yesterday]] - PostgreSQL database setup
- Database schema: `database/schema.sql`
- Virtual environment: `mario-rl-agent-py3.14`
- W&B account: Created and authenticated

## üíª Code/Commands Used

```bash
# Database schema execution
psql -U mario_rl_user -d mario_rl_db -f database/schema.sql

# Verify tables created
psql -U mario_rl_user -d mario_rl_db
\dt
\d experiments
\d hyperparameters
\d episodes
\d training_metrics

# Weights & Biases setup
poetry add wandb
wandb login

# Pre-commit setup
poetry add --group dev pre-commit
pre-commit install
pre-commit run --all-files

# File management
mv test.sql database/schema.sql
rm -rf ~/mlp/~

# Git workflow
git add database/schema.sql
git commit -m "Add database schema for experiment tracking"
git commit --amend  # Edit commit message
```

```sql
-- Example table creation (experiments)
CREATE TABLE experiments (
    experiment_id SERIAL PRIMARY KEY,
    experiment_name TEXT NOT NULL,
    algorithm TEXT NOT NULL,
    status TEXT NOT NULL,
    start_timestamp TIMESTAMP NOT NULL,
    end_timestamp TIMESTAMP,
    total_episodes INTEGER,
    git_commit_hash TEXT NOT NULL,
    python_version TEXT NOT NULL,
    pytorch_version TEXT NOT NULL,
    notes TEXT
);

-- Example foreign key (episodes references experiments)
CREATE TABLE episodes (
    episode_id SERIAL PRIMARY KEY,
    experiment_id INTEGER REFERENCES experiments(experiment_id),
    -- ... other columns
);
```

## üìù Notes

**üéâ MAJOR MILESTONE: Phase 1 Complete!**

Today was incredibly productive - finished the entire Phase 1 of the project! The database schema design was the most substantial work, requiring careful thought about data relationships, normalization, and when to use constraints.

**Key insight**: Database design is about modeling the *lifecycle* of data. Understanding when rows are created (at start vs. completion) determines which fields can be NULL. This applies broadly to any system that tracks state over time.

**SQL learning curve**: Writing SQL by hand taught me to appreciate ORMs and migration tools, but understanding the underlying CREATE TABLE syntax is crucial for debugging and optimization later.

**W&B setup** was surprisingly quick - modern ML tools have excellent onboarding. The separation between local detailed storage (PostgreSQL) and cloud visualization/collaboration (W&B) makes sense for professional workflows.

**Pre-commit hooks** are a game-changer for maintaining code quality. The auto-fixing capability (trailing whitespace, formatting) removes mental overhead and prevents "oops forgot to run black" commits.

**Connection to cybersecurity goals**: All of these skills transfer directly:
- SQL database design ‚Üí SIEM data storage, threat intelligence databases
- Experiment tracking ‚Üí Security model evaluation and tuning
- Pre-commit hooks ‚Üí Security policy enforcement in CI/CD
- Data normalization ‚Üí Efficient log storage and correlation

**Ready for Phase 2!** The foundation is solid - database ready for experiment tracking, W&B ready for visualization, code quality automated with hooks. Next up: actually running Mario and building the first RL agent!

_Session end: 4:00 PM - Phase 1 complete in 3 days of focused work!_
[[daily]]
